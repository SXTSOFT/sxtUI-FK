<md-dialog>
  <md-toolbar class="md-hue-2 h-50 sub-toolbar">
    <div class="md-toolbar-tools">
      <h2>
        <span>{{vm.dialogData.formData.name}}</span>
      </h2>
      <span flex></span>
      <!--<md-button ng-click="vm.currentIndex='default'" ng-if="vm.currentIndex&&vm.currentIndex !='default'"><md-icon md-font-icon="icon-keyboard-return"></md-icon></md-button>-->
      <md-button class="md-icon-button" ng-click="vm.close()"><md-icon md-font-icon="icon-close"></md-icon></md-button>
    </div>
  </md-toolbar>
  <md-dialog-content>
    <div layout="row" style="width:800px;">
      <div flex="80">
        <table class="simple gantable">
          <thead>
          <tr><th style="width: 25px;min-width: 25px"></th>
            <th>流程</th>
            <th>计划时间</th>
            <th>实时时间</th>
            <th>实际时间</th>
            <th>状态</th>
            <th>操作</th>
          </tr></thead>
          <tbody>
          <tr ng-repeat="flow in vm.flows">
            <td style="padding:3px;height:44px;">
              {{$index+1}}、
            </td>
            <td style="padding:3px;height:44px;">
              <div style="height:36px;overflow: hidden;white-space: normal;width:90px;" layout="column" layout-align="center start">
                <div>{{flow.Name}}</div>
              </div>
            </td>
            <td style="padding:3px">{{flow.ScheduledStartTime|date:'yyyy-MM-dd'}}~<br/>{{flow.ScheduledEndTime|date:'yyyy-MM-dd'}}</td>
            <td style="padding:3px">{{flow.RealScheduledStartTime|date:'yyyy-MM-dd'}}~<br/>{{flow.RealScheduledEndTime|date:'yyyy-MM-dd'}}</td>
            <td style="padding:3px">{{flow.ActualStartTime|date:'yyyy-MM-dd'}}~<br/>{{flow.ActualEndTime|date:'yyyy-MM-dd'}}</td>
            <td style="padding:3px">{{flow._State}}</td>
            <td style="color:#f00;padding:3px;">
              <md-button style="min-height:24px;line-height: 24px;height:24px;padding:0;min-width: 40px;" ng-click="vm.showTaskD(flow)" ng-if="(flow.State==2)&&flow.ManuallyClose">查看
                <md-tooltip md-delay="10">
                  {{flow.EndDescription}}
                </md-tooltip>
              </md-button>
              <md-button style="min-height:24px;line-height: 24px;height:24px;padding:0;min-width: 40px;" ng-click="vm.startTask(flow)" ng-if="flow.IsAbleStart&&(flow.IsInterlude)">开启穿插</md-button>
              <md-button style="min-height:24px;line-height: 24px;height:24px;padding:0;;min-width: 40px;" ng-click="vm.closeTask(flow)" ng-if="flow.IsAbleStart&&!flow.IsInterlude&&(flow.ManuallyClose||flow.IsRelatedObject)"  ng-disabled="(flow.ManuallyClose||flow.IsRelatedObject)&&!flow.IsAbleStart">完成</md-button>
            </td>
          </tr>
          <tr>
            <td colspan="5" ng-if="!vm.flows.length">无流程信息</td>
          </tr>
          </tbody>
        </table>
      </div>
      <div flex="20">
        <div style="height: 65px"></div>
        <canvas id="gitGraph" ng-show="vm.hasFlow"></canvas>
      </div>
    </div>
  </md-dialog-content>
</md-dialog>
