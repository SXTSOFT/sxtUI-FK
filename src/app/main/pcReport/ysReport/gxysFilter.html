<md-toolbar class="md-hue-1" ng-if="!vm.isMobile">
    <div class="md-toolbar-tools">
        <h4>
            <span>工序验收</span>
        </h4>
    </div>
</md-toolbar>
<div ng-if="!vm.isMobile||vm.isiPad">
    <md-card style="background-color: white;" md-theme-watch>
        <md-card-content>
            <div flex layout="row">
                <md-input-container md-theme="default" flex>
                    <label>项目</label>
                    <md-select ng-model="project">
                        <md-option ng-click="vm.ck(item)" ng-repeat="item in vm.regions" ng-value="item.RegionID">
                            {{item.RegionName}}
                        </md-option>
                    </md-select>
                </md-input-container>
            </div>
            <div style="width: 20px"></div>
            <div flex layout="row" ng-click="click()">
                <md-input-container md-theme="default" style="padding-left: 2px" flex><label style="left: 0px">工序</label>
                    <div><input ng-model="gxNames" disabled/>
                        <md-button class="md-icon-button md-primary" style="position: absolute;right: -8px;" aria-label="Settings">
                            <md-icon md-font-icon="icon-magnify" class="icon s24"></md-icon>
                        </md-button>
                    </div>
                </md-input-container>
            </div>
        </md-card-content>
    </md-card>
    <form method="post" action="http://emp.chngalaxy.com:9091/api/MaterialPlan/GetMaterialReportXls" target="_blank">
        <input id="export" type="hidden" name="table" />
        <input id="tital" type="hidden" name="tital" value="工序验收报表" />
        <md-button class="md-raised md-primary" type="submit" ng-click="vm.printBatchCount()">Excel导出</md-button>
    </form>
    <div flex style="margin: 24px 16px" id="divReport">
        <table class="table table-hover ">
            <thead>
                <tr>
                    <th style="text-align: center;border: 1px solid #ddd;">序号</th>
                    <th style="text-align: center;border: 1px solid #ddd;">工序</th>
                    <th style="text-align: center;border: 1px solid #ddd;">区域</th>
                    <th style="text-align: center;border: 1px solid #ddd;">报验时间</th>
                    <th style="min-width: 50px;text-align: center;border: 1px solid #ddd;">状态</th>
                    <th style="text-align: center;border: 1px solid #ddd;">操作</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="item in vm.source">
                    <td style="text-align: center;vertical-align: middle;width: 50px;border: 1px solid #ddd;">{{$index+1}}</td>
                    <td style="text-align: left;min-width: 120px;vertical-align: middle;border: 1px solid #ddd;">{{item.AcceptanceItemName}}</td>
                    <td style="text-align: left;min-width: 120px;vertical-align: middle;border: 1px solid #ddd;">
                        <md-list style="padding: 0px 15px" ng-cloak>
                            <md-list-item ng-repeat="k in item.Children">
                                {{k.RegionName}}
                            </md-list-item>
                        </md-list>
                    </td>
                    <td style="text-align: center;vertical-align: middle;;border: 1px solid #ddd;">
                        {{item.InspectionTime}}
                    </td>
                    <td style="text-align: center;vertical-align: middle;width: 80px;border: 1px solid #ddd;">
                        {{item.statusName}}
                    </td>
                    <td style="text-align: center;width: 80px;vertical-align: middle;border: 1px solid #ddd;">
                        <md-button ng-click="vm.Lookintoys(item)" class="md-primary" aria-label="Settings">
                            <md-icon md-font-icon="icon-magnify" class="icon s24"></md-icon>查看</md-button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div layout="row">
            <span flex></span>
            <md-select ng-model="pageing.pageSize" class="pageSZ">
                <md-option value="10">10</md-option>
                <md-option value="20">20</md-option>
                <md-option value="40">40</md-option>
                <md-option value="80">80</md-option>
                <md-option value="100">100</md-option>
            </md-select>
            <div style="text-align: right;margin-right: 15px" paging page="pageing.page" page-size="pageing.pageSize" total="pageing.total" paging-action="vm.pageAction('', page, pageSize, total)">
            </div>
        </div>
    </div>
</div>
<div ng-if="vm.isMobile&&!vm.isiPad" style="position: relative">

    <section style="padding: 22px 18px">
        <div flex layout="row">
            <md-input-container md-theme="default" flex>
                <label>项目</label>
                <md-select ng-model="project" name="type">
                    <md-option ng-click="vm.ck(item)" ng-repeat="item in vm.regions" ng-value="item.RegionID">
                        {{item.RegionName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div style="width: 20px"></div>
        <div flex layout="row" ng-click="click()">
            <md-input-container md-theme="default" style="padding-left: 2px" flex><label style="left: 0px">工序</label>
                <div><input ng-model="gxNames" disabled/>
                    <md-button class="md-icon-button md-primary" style="position: absolute;right: -8px;" aria-label="Settings">
                        <md-icon md-font-icon="icon-magnify" class="icon s24"></md-icon>
                    </md-button>
                </div>
            </md-input-container>
        </div>
        <div layout="row">
            <md-button style="margin: 12px 0px" class="md-raised md-primary" flex ng-click="vm.filter()"> 确定</md-button>
        </div>
    </section>
</div>
<md-sidenav id="gx_nav" layout="column" style="min-width: 80%" class="md-sidenav-right md-whiteframe-4dp" md-component-id="right">
    <div flex layout="column" style="border-top: 1px solid #f5f5f9">
        <md-tabs md-border-bottom flex style="background-color:white">
            <md-tab label="已选工序({{gxSelected.length}})">
                <md-tab-content layout="column">
                    <md-content flex layout="row">
                        <md-list style="box-shadow:1px 0px 15px 0 #d8d8d8 " flex="40" ms-scroll>
                            <md-list-item ng-repeat="item in gxSelected">
                                <md-checkbox ng-click="remove(item)" ng-model="item.checked" style="margin-right: 8px">
                                    {{item.AcceptanceItemName}}
                                </md-checkbox>
                                <p flex>{{item.AcceptanceItemName}}</p>
                            </md-list-item>
                            <span flex></span>
                        </md-list>
                    </md-content>
                </md-tab-content>
            </md-tab>
            <md-tab ng-repeat="gx1 in procedures" label="{{gx1.SpecialtyName}}">
                <md-tab-content layout="column">
                    <md-content flex layout="column">
                        <div flex layout="row">
                            <div flex="40" style="position: relative" ms-scroll layout="column">
                                <md-list style="margin-left:8px ">
                                    <md-list-item ng-click="selectSpecialtyLow(item,gx1)" layout="row" ng-repeat="item in  gx1.SpecialtyChildren">
                                        <p>{{item.SpecialtyName}}</p>
                                    </md-list-item>
                                </md-list>
                            </div>
                            <md-list flex style="box-shadow:-1px 0px 15px 0 #d8d8d8 ">
                                <md-list-item layout="row" ng-repeat="item in  gx1.WPAcceptanceList">
                                    <md-checkbox ng-click="choosego(item)" ng-model="item.checked" style="margin-right: 8px">
                                    </md-checkbox>
                                    <p flex>{{item.AcceptanceItemName}}</p>
                                </md-list-item>
                            </md-list>
                        </div>
                    </md-content>
                </md-tab-content>
            </md-tab>
        </md-tabs>
    </div>
</md-sidenav>