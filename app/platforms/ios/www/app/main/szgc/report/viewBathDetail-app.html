
<div class="panel" md-padding>
    <div class="panel-body">
     <!--<a class="btn btn-sm btn-white" style="padding: 5px 31px; float: right;margin-right: -4px;margin-bottom: 6px;margin-top: -6px;" ng-click="goback()">返回</a>-->
 <h2>{{titol.ProcedureName}}验收记录表</h2>
    </div>
    <div class="table-responsive vk" style="border: 0px">
        <div class="row">
            <div class="col-lg-12 target2">
                <table class="target " width="100%" border="1" cellspacing="0" cellpadding="4" style="border-collapse: collapse;">
                    <tr>
                        <td width="13%" >单位(子单位)工程名称</td>
                        <td colspan="5">{{titol.RegionNameTree}}</td>
                    </tr>
                    <tr>
                        <td>分项工程名称</td>
                        <td width="21%">{{titol.ProcedureName}}</td>
                        <td width="20%">检查日期</td>
                        <td>{{jlTitol.CheckDate}}</td>
                        <td>万科抽查日期</td>
                        <td>{{egTitol.CheckDate}}</td>
                    </tr>
                    <tr>
                        <td >验收部位</td>
                        <td>{{titol.RegionName}} </td>
                        <td>监理单位检查人</td>
                        <td width="13%">{{jlTitol.CheckWorkerName}}</td>
                        <td width="16%">万科抽查人</td>
                        <td width="17%">{{egTitol.CheckWorkerName}}</td>
                    </tr>
                    <tr>
                        <td >总承包施工单位</td>
                        <td>{{titol.ParentCompanyName}}</td>
                        <td>施工单位负责人</td>
                        <td>{{jlTitol.CompanyName}}</td>
                        <td>施工班组负责人</td>
                        <td>{{titol.GrpName}}</td>
                    </tr>
                </table>
                <table class="target target2" border="0" cellspacing="0" cellpadding="0" style="margin-top: 5px;border-collapse: collapse;width:100%;">
                    <tr>
                        <td style="padding:0;">
                            <table border="1" cellspacing="0" cellpadding="4" style="border-collapse: collapse;width:100%;">
                                <tr>
                                    <td style="width:50%" rowspan="2" colspan="{{data.selected.d.info.zyColLength+2}}" align="center">
                                        施工质量验收规范的规定
                                    </td>
                                    <td style="width:50%" colspan="2"  align="center">检查评定记录</td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                      <md-select placeholder="请选择" ng-model="data.selected" style="margin:3px 0">
                                        <md-option ng-value="item" ng-repeat="item in data.sources">{{item.text}}</md-option>
                                      </md-select>
                                        <!--<ui-select ng-model="data.selected"  theme="selectize" class="form-control">-->
    <!--<ui-select-match placeholder="请选择" >{{$select.selected.text}}</ui-select-match>-->
    <!--<ui-select-choices repeat="item in data.sources | propsFilter:{text: $select.search}">-->
        <!--{{item.text}}-->
    <!--</ui-select-choices>-->
<!--</ui-select>-->
                                    </td>
                                </tr>
                                <tr ng-repeat="n in data.selected.d.zk" >
                                    <td rowspan="{{data.selected.d.info.zyCount()}}" ng-if="$index==0" align="center" style="width:50px;">
                                        <p>主</p>
                                        <p>控</p>
                                        <p>项</p>
                                        <p>目</p>
                                    </td>
                                    <td align="center" style="width:40px;">{{$index+1}}</td>
                                    <td ng-repeat="m in n.names" ng-click="data.selected.d.info.zyColSelected=$index" ng-if="m.rowspan!=0 && m.colspan!=0" rowspan="{{m.rowspan||1}}" colspan="{{m.colspan||1}}">{{m.name}}</td>
                                    <td style="width:40%">{{n.Remark}}</td>
                                    <td class="targettd" style="width:150px; text-align:center;">
                                       {{n.MPCheckValue==0?n.NoPassText:n.PassText}}
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding:0;">
                            <table border="1" cellspacing="0" cellpadding="4" style="border-collapse: collapse;width:100%;">
                                <tr>
                                    <td style="width:50px;">&nbsp;</td>
                                    <td style="width:40px;">&nbsp;</td>
                                    <td rowspan="2" colspan="{{data.selected.d.info.ybColLength}}">
                                        &nbsp; &nbsp;  项目

                                        <div class="clearfix"></div>
                                    </td>
                                    <td width="91" rowspan="2" align="center">允许偏差（mm）</td>
                                    <td align="center">检查点数</td>
                                    <td align="center">合格率</td>
                                    <td align="center">最大偏差</td>
                                    <td colspan="2" align="center">总包自检</td>
                                    <td colspan="2" align="center">万科、第三方抽验</td>
                                    <td rowspan="2" align="center">备注</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td colspan="3" align="center">
                                      <md-select placeholder="请选择" ng-model="data.selected" style="margin:3px 0">
                                        <md-option ng-value="item" ng-repeat="item in data.sources">{{item.text}}</md-option>
                                      </md-select>
                                      <!--<ui-select ng-model="data.selected" theme="bootstrap" class="form-control">-->
    <!--<ui-select-match placeholder="请选择">{{$select.selected.text}}</ui-select-match>-->
    <!--<ui-select-choices repeat="item in data.sources | propsFilter:{text: $select.search}">-->
        <!--{{item.text}}-->
    <!--</ui-select-choices>-->
<!--</ui-select>-->
                                    </td>
                                    <td>合格率</td>
                                    <td>符合率</td>
                                    <td>合格率</td>
                                    <td>符合率</td>
                                </tr>
                                <tr ng-repeat="n in data.selected.d.yb">
                                    <td rowspan="{{data.selected.d.info.ybLength}}" ng-if="$index==0" align="center">
                                        <p>一</p>
                                        <p>般</p>
                                        <p>项</p>
                                        <p>目</p>
                                    </td>
                                    <td ng-class="{'tdselectd':n.selected}" align="center">{{$index+1}}</td>
                                    <td ng-repeat="m in n.names" ng-click="data.selected.d.info.ybColSelected=$index" ng-if="m.rowspan!=0 && m.colspan!=0" rowspan="{{m.rowspan||1}}" colspan="{{m.colspan||1}}">{{m.name}}</td>
                                    <td style="width:150px" align="center">
                                        <span ng-if="n.getPassRatio">平均合格率</span> {{n.DeviationLimit}}
                                    </td>
                                    <td align="center">{{n.CheckNum}}</td>
                                    <td align="center">{{n.PassRatio}}<span ng-if="n.getPassRatio">{{n.ok()?'合格':'不合格'}}({{n.getPassRatio()|number:2}})</span></td>
                                    <td align="center">{{n.MaxDeviation}}</td>
                                    <td align="center">{{n.ZbPassRatio}}</td>
                                    <td align="center">{{n.ZBFHL}}</td>
                                    <td align="center">{{n.VKPassRatio}}</td>
                                    <td align="center">{{n.FHL}}</td>
                                    <td align="center"></td>
                                </tr>

                                <tr ng-if="data.selected.d.yb.length">
                                    <td colspan="{{data.selected.d.yb[0].names.length+2}}"></td>
                                    <!--<td style="width:150px" align="center"></td>-->
                                    <td align="center" colspan="8">主控：{{zkIsOk(data.selected.d.zk)?"合格":"不合格"}} &nbsp;&nbsp;
                                    一般：{{ybIsOk(data.selected.d.yb)?"合格":"不合格"}}({{ybHGL(data.selected.d.yb)}}) &nbsp;&nbsp;
                                     总体({{ybHGLPJ(data.selected.d.yb)|number:2}}) &nbsp;&nbsp;
                                     结果：{{zkIsOk(data.selected.d.zk)&&ybIsOk(data.selected.d.yb)?"合格":"不合格"}}
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
      <!--ng-if="checkDataValues.length>0"-->

    </div>
    <div>
      <fieldset >
          <legend style="margin-bottom: 10px;">原验收表扫描件或验收结果列表</legend>
          <div ng-if="vm.isShow" style="margin-bottom: 10px;">
            <p style="font-size:20px;">
              监理检查记录
            </p>
            <div ng-repeat="n in data.selected.d.yb">
              <h3 style="margin-top:10px;">{{$index+1}}、{{n.TargetName}} 允许偏差（mm） :{{n.DeviationLimit}}</h3>
              <div class="circle">
                <div>
                  <div ng-repeat="point in n.points"><div class="point" ng-class="{'done':!point.Result}"><span>{{point.Value}}</span></div></div>
                </div>
              </div>
            </div>
            <p style="font-size:20px;">
              万科检查记录
            </p>
            <div ng-repeat="n in data.selected.eg.yb">
              <h3 style="margin-top:10px;">{{$index+1}}、{{n.TargetName}} 允许偏差（mm） :{{n.DeviationLimit}}</h3>
              <div class="circle">
                <div>
                  <div ng-repeat="point in n.points"><div class="point" ng-class="{'done':!point.Result}"><span>{{point.Value}}</span></div></div>
                </div>
              </div>
            </div>
          </div>
          <div sxt-image-view is-container="true" ng-if="!vm.showData">
          <sxt-images  ng-model="data.selected.step.GroupImg" project="data.projectInfo" ></sxt-images>
          </div>
      </fieldset>

      <fieldset>
          <legend>附件</legend>
          <div  sxt-image-view is-container="true">
            <sxt-images  ng-model="data.selected.step.GroupImg2" project="data.projectInfo"></sxt-images>
          </div>
      </fieldset>
    </div>


</div>
<div style="position: fixed; top:93px; right:0px;">
  <md-button class="md-fab md-mini" ng-if="!vm.isPartner"  ng-click="vm.goAdd()">
    抽验
  </md-button>

</div>﻿
